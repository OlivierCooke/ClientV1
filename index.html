<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta author="OlivierCooke/AlexandreLeblanc">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>News Worthy</title>

    <link rel="stylesheet" href="css/bootstrap.css">
    <link rel="stylesheet" href="css/styles.css">

    <!-- favicon link: use https://favicon.io/favicon-converter/ to create new favicon -->
    <link rel="icon" href="favicon.ico">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.7.1/font/bootstrap-icons.css">
</head>

<body>
    <nav class="navbar fixed-top navbar-expand-lg navbar-dark bg-dark shadow">
        <div class="container-fluid gap-2">
            <a class="navbar-brand" href="#">
                <img src="./assets/logo.png" width="50" height="50" />
            </a>

            <div class="collapse navbar-collapse  gap-2" id="navbarSupportedContent">
                <button type="button" class="btn btn-outline-primary shadow-sm" id="addNews">
                    <i class="bi bi-plus-lg"></i>
                </button>
                <div class="dropdown">
                    <button class="btn btn-outline-primary dropdown-toggle shadow-sm" type="button" id="cmbAuthor"
                        data-bs-toggle="dropdown" aria-expanded="false">
                        Filter Author
                    </button>
                    <ul class="dropdown-menu style-4" aria-labelledby="cmbAuthor">
                        <li><a class="dropdown-item" href="#">Action</a></li>
                        <li><a class="dropdown-item" href="#">Another action</a></li>
                        <li><a class="dropdown-item" href="#">Something else here</a></li>
                        <li><a class="dropdown-item" href="#">Something else here</a></li>
                        <li><a class="dropdown-item" href="#">Something else here</a></li>
                        <li><a class="dropdown-item" href="#">Something else here</a></li>
                        <li><a class="dropdown-item" href="#">Something else here</a></li>
                        <li><a class="dropdown-item" href="#">Something else here</a></li>
                        <li><a class="dropdown-item" href="#">Something else here</a></li>
                        <li><a class="dropdown-item" href="#">Something else here</a></li>
                        <li><a class="dropdown-item" href="#">Something else here</a></li>
                        <li><a class="dropdown-item" href="#">Something else here</a></li>
                        <li><a class="dropdown-item" href="#">Something else here</a></li>
                        <li><a class="dropdown-item" href="#">Something else here</a></li>
                        <li><a class="dropdown-item" href="#">Something else here</a></li>
                        <li><a class="dropdown-item" href="#">Something else here</a></li>
                        <li><a class="dropdown-item" href="#">Something else here</a></li>
                        <li><a class="dropdown-item" href="#">Something else here</a></li>
                        <li><a class="dropdown-item" href="#">Something else here</a></li>
                    </ul>
                </div>
                <form class="d-flex">
                    <input class="form-control me-2" type="search" placeholder="Search by key words"
                        aria-label="Search">
                    <button class="btn btn-outline-primary" type="submit">Search</button>
                </form>
            </div>
            <div class="d-flex flex-row justify-content-around gap-2">
                <div id="avatarContainer" class="shadow-sm">
                    <div class='avatar'
                        style='background:url(" https://avatars.dicebear.com/api/bottts/qwerty.svg ") no-repeat center; background-size: cover; margin-right:5px;'>
                    </div>
                </div>
                <div class='unameContainer d-flex flex-row align-items-center justify-content-center'>
                    <span class="ellipsis">My UName</span>
                </div>
            </div>
            <button class="navbar-toggler" type="button" data-bs-toggle="collapse"
                data-bs-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false"
                aria-label="Toggle navigation">
                <span class="navbar-toggler-icon"></span>
            </button>
    </nav>
    <div id="mainContainer" class="container overflow-auto style-4" style="margin-top: 80px; height: 91vh;">
            <!-- END Facebook post template -->       
        <div class="container mt-5 mb-5">
            <div class="row d-flex align-items-center justify-content-center">
                <div class="col-md-6">
                    <div id="card_1_glow" class="card text-white bg-dark shadow">
                        <div class="d-flex justify-content-between p-2 px-3">
                            <div class="d-flex flex-row align-items-center gap-2">
                                <img src=" https://i.imgur.com/xhzhaGA.jpg" width="40" class="rounded-circle">
                                <div class="d-flex flex-column">
                                    <span class="font-weight-bold">Jeannette Sun</span>
                                    <small class="mr-2">19/11/2021 19h30</small>
                                </div>
                            </div>
                            <div class="d-flex flex-row mt-1 gap-2">
                                <button id="edit_btn_1" class="btn btn-outline-primary rounded-circle" onclick="modify(1)">
                                    <i class="bi bi-pencil"></i>
                                </button>
                                <button hidden id="btn_submit_edit" class="btn btn-outline-primary rounded-circle" type="submit"><i class="bi bi-check-lg"></i></button>
                                <button hidden id="btn_cancel_1" class="btn btn-outline-primary rounded-circle" onclick="cancelEdit(1)">
                                    <i class="bi bi-x-lg"></i>
                                </button>
                                <button id="btn_delete_1" class="btn btn-outline-primary rounded-circle" onclick="deletePost()">
                                    <i class="bi bi-x-lg"></i>
                                </button>
                            </div>
                        </div>
                        <div id="card_1_title" class="text-white text-center fs-3 w-100">
                            <span id="title_1">titre test</span>
                            <input hidden id="title_Input_1" name="title" type="text" class="mb-2 mt-2 rounded border-3 border-primary" value="test"></input>
                        </div>
                        <!-- Zone modifiÃ© -->
                        <img id="image_displayer" src="https://i.imgur.com/xhzhaGA.jpg" class="img-fluid">
                        <div hidden id="image-uploader" class="image-upload">
                            <label for="file-input">
                                <img id="mainImage_1" src="https://i.imgur.com/xhzhaGA.jpg" class="img-fluid rounded">
                            </label>
                            <input id="file-input" type="file" onchange="preview(1)"/>                            
                        </div>
                        
                        <div class="p-2">
                            <hr>
                            <p id="card_1_description" class="text-justify text-center overflow-auto style-4" style="max-height:150px;">description</p>
                            <p id="card_1_edit_description" hidden class="text-justify text-center overflow-auto style-4" style="max-height:150px;"><textarea id="description_1" name="description" class="form-control"></textarea></p><hr>
                            <hr>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
        <!-- END Facebook post template -->       
    </div>
</body>
<script src="js/bootstrap.js"></script>
<script>
    const element = document.querySelector('.style-4');
    element.addEventListener('scroll', () => { console.log(element.scrollTop) });

    function postsTemplate(postToBuild)
    {
        let imageURLProfil = 'https://i.imgur.com/xhzhaGA.jpg';
        let imageURLPicture = 'https://i.imgur.com/xhzhaGA.jpg';
        let name = 'Jeannette Sun';
        let date = '19/11/2021 19h30';
        let id = '1';
        let post = '<div id="card_'+ id +'" class="container mt-5 mb-5">'; 
        post+= '<div class="row d-flex align-items-center justify-content-center">' 
        post+= '<div class="col-md-6">';
        post+= '<div class="card text-white bg-dark shadow">';
        post+='<div class="d-flex justify-content-between p-2 px-3">'; 
        post+='<div class="d-flex flex-row align-items-center gap-2">' 
        post+='<img src=" '+ imageURLProfil +'" width="40" class="rounded-circle">' 
        post+='<div class="d-flex flex-column">';            
        post+= '<span class="font-weight-bold">'+ name +'</span>'; 
        post+='<small class="mr-2">' + date + '</small>';
        post+='</div></div>';
        post+='<div class="d-flex flex-row mt-1 gap-2">';
        post+='<button class="btn btn-outline-primary rounded-circle" onclick="modify()"><i class="bi bi-pencil"></i></button>';
        post+='<button class="btn btn-outline-primary rounded-circle" onclick="deletePost()"><i class="bi bi-x-lg"></i></button>';
        post+='</div></div>';   
        post+='<div id="title" class="text-white text-center fs-3 w-100">'+ title +'</div>';
        post+='<img src="'+ imageURLPicture +'" class="img-fluid">';
        post+='<div class="p-2" ><hr>';
        post+='<p id="description" class="text-justify text-center overflow-auto style-4" style="max-height:150px;">'+ description +'</p><hr>';
        post+='</div></div></div></div></div>'; 

        document.getElementById('mainContainer').innerHTML += post;
    }


    function modify(id)
    {
        let target = 'card_' + id;
        console.log(target);
        let title = document.getElementById('title_' + id).innerHTML;
        console.log(title);
        let description = document.getElementById(target + '_description').innerHTML;
        console.log(description)
        let image = document.getElementById('mainImage_' + id).src;
        console.log(image);

        document.getElementById('title_' + id).hidden = true;
        document.getElementById('title_Input_' + id).hidden = false;
        document.getElementById('title_' + id).value = title;
        console.log(document.getElementById('card_1_glow'));
        document.getElementById('card_1_glow').classList.remove('shadow')
        document.getElementById('card_1_glow').style.boxShadow = '0 1rem 3rem  #398dff';

        document.getElementById('card_1_edit_description').hidden = false;
        document.getElementById('description_1').value = description;
        document.getElementById('card_1_description').hidden = true;
        document.getElementById('image-uploader').hidden = false;
        document.getElementById('image_displayer').hidden = true;

        document.getElementById('btn_cancel_1').hidden = false;
        document.getElementById('edit_btn_1').hidden = true;
        document.getElementById('btn_delete_1').hidden = true;

        document.getElementById('btn_submit_edit').hidden = false;
    }

    function cancelEdit(id)
    {
        let target = 'card_' + id;
        console.log(target);
        let title = document.getElementById(target + '_title').innerHTML;
        console.log(title);
        let description = document.getElementById(target + '_description').innerHTML;
        console.log(description)
        let image = document.getElementById('mainImage_' + id).src;
        console.log(image);

        document.getElementById('title_' + id).hidden = false;
        document.getElementById('title_Input_' + id).hidden = true;
        console.log(document.getElementById('card_1_glow'));
        document.getElementById('card_1_glow').classList.add('shadow')
        document.getElementById('card_1_glow').style.boxShadow = 'none';

        document.getElementById('card_1_edit_description').hidden = true;
        document.getElementById('description_1').value = description;
        document.getElementById('card_1_description').hidden = false;
        document.getElementById('image-uploader').hidden = true;
        document.getElementById('image_displayer').hidden = false;

        document.getElementById('btn_cancel_1').hidden = true;
        document.getElementById('edit_btn_1').hidden = false;
        document.getElementById('btn_delete_1').hidden = false;

        document.getElementById('btn_submit_edit').hidden = true;
    }

    function deletePost()
    {
        console.log('delete')
    }

    function preview(id){
        let image = document.getElementById('mainImage_' + id);
        image.src = URL.createObjectURL(event.target.files[0]);
    }


    (function() {
    })();
</script>

</html>